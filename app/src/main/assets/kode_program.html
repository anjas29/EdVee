<html>
<p>#include&nbsp;&lt;Adafruit_Sensor.h&gt;</p>
<p>&nbsp;</p>
<p>#include&nbsp;&lt;ESP8266WiFi.h&gt;</p>
<p>#include&nbsp;&lt;FirebaseArduino.h&gt;</p>
<p>&nbsp;</p>
<p>#define&nbsp;FIREBASE_HOST&nbsp;"tekno-7c6bf.firebaseio.com"</p>
<p>#define&nbsp;FIREBASE_AUTH&nbsp;"T7mZQyoTcJADlO3UV8gcZVx5G4BvwomBowJRVpxp"</p>
<p>&nbsp;</p>
<p>#define&nbsp;WIFI_SSID&nbsp;"Connectify-EM"</p>
<p>#define&nbsp;WIFI_PASSWORD&nbsp;"petasih4"</p>
<p>&nbsp;</p>
<p>#include&nbsp;"DHT.h"&nbsp;&nbsp;&nbsp;//&nbsp;pin&nbsp;digital&nbsp;yang&nbsp;digunakan</p>
<p>#define&nbsp;DHTPIN&nbsp;D2&nbsp;//&nbsp;saat&nbsp;ini&nbsp;saya&nbsp;pakai&nbsp;sensor&nbsp;DHT11.&nbsp;dan&nbsp;uncomment&nbsp;sensor&nbsp;yang&nbsp;diinginkan&nbsp;</p>
<p>#define&nbsp;DHTTYPE&nbsp;DHT22</p>
<p>&nbsp;</p>
<p>//#define&nbsp;DHTTYPE&nbsp;DHT22&nbsp;&nbsp;&nbsp;</p>
<p>//#define&nbsp;DHTTYPE&nbsp;DHT21&nbsp;</p>
<p>&nbsp;</p>
<p>DHT&nbsp;dht(DHTPIN,&nbsp;DHTTYPE);</p>
<p>&nbsp;</p>
<p>int&nbsp;sensor&nbsp;=&nbsp;A0;</p>
<p>int&nbsp;lm35=&nbsp;0;</p>
<p>&nbsp;</p>
<p>const&nbsp;int&nbsp;tombol&nbsp;=&nbsp;5;&nbsp;//pin&nbsp;tombol</p>
<p>const&nbsp;int&nbsp;led&nbsp;=&nbsp;D0;&nbsp;//pin&nbsp;lled</p>
<p>int&nbsp;val=0;</p>
<p>&nbsp;</p>
<p>void&nbsp;setup()&nbsp;{</p>
<p>&nbsp;&nbsp;Serial.begin(9600);</p>
<p>&nbsp;&nbsp;dht.begin();</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;pinMode&nbsp;(tombol,INPUT_PULLUP);</p>
<p>&nbsp;&nbsp;pinMode&nbsp;(led,OUTPUT);</p>
<p>&nbsp;&nbsp;pinMode&nbsp;(LED_BUILTIN,&nbsp;OUTPUT);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;//&nbsp;connect&nbsp;to&nbsp;wifi.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;WiFi.begin(WIFI_SSID,&nbsp;WIFI_PASSWORD);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Serial.print("connecting");</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(WiFi.status()&nbsp;!=&nbsp;WL_CONNECTED)&nbsp;{</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Serial.print(".");</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;delay(500);</p>
<p>&nbsp;&nbsp;}</p>
<p>&nbsp;&nbsp;Serial.println();</p>
<p>&nbsp;&nbsp;Serial.print("connected:&nbsp;");</p>
<p>&nbsp;&nbsp;Serial.println(WiFi.localIP());</p>
<p>&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;Firebase.begin(FIREBASE_HOST,&nbsp;FIREBASE_AUTH);</p>
<p>}</p>
<p>&nbsp;</p>
<p>&nbsp;int&nbsp;n=0;</p>
<p>&nbsp;</p>
<p>void&nbsp;loop()&nbsp;{</p>
<p>//===========================================================lm35&nbsp;main</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;float&nbsp;suhu&nbsp;=&nbsp;analogRead(sensor);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;suhu&nbsp;=&nbsp;suhu&nbsp;*&nbsp;0.48828125;&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;Serial.print("&nbsp;Suhu:&nbsp;");</p>
<p>&nbsp;&nbsp;Serial.println(suhu);</p>
<p>&nbsp;&nbsp;//delay(1000);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//delay&nbsp;sesaat&nbsp;sebelum&nbsp;pembacaan&nbsp;selanjutnya</p>
<p>&nbsp;</p>
<p>//======================================================suhu&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;//&nbsp;set&nbsp;value</p>
<p>&nbsp;&nbsp;Firebase.setFloat("baca_suhu",&nbsp;suhu);</p>
<p>&nbsp;&nbsp;//&nbsp;handle&nbsp;error</p>
<p>&nbsp;&nbsp;if&nbsp;(Firebase.failed())&nbsp;{</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.print("setting&nbsp;/suhu&nbsp;failed:");</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(Firebase.error());&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</p>
<p>&nbsp;&nbsp;}</p>
<p>&nbsp;&nbsp;//delay(1000);</p>
<p>&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;//&nbsp;update&nbsp;value</p>
<p>&nbsp;&nbsp;Firebase.setFloat("baca_suhu",&nbsp;suhu);</p>
<p>&nbsp;&nbsp;//&nbsp;handle&nbsp;error</p>
<p>&nbsp;&nbsp;if&nbsp;(Firebase.failed())&nbsp;{</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.print("setting&nbsp;/baca_suhu&nbsp;failed:");</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(Firebase.error());&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</p>
<p>&nbsp;&nbsp;}</p>
<p>&nbsp;//&nbsp;delay(1000);</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;//&nbsp;get&nbsp;value&nbsp;</p>
<p>&nbsp;&nbsp;Serial.print("baca_suhu:&nbsp;");</p>
<p>&nbsp;&nbsp;Serial.println(Firebase.getFloat("baca_suhu"));</p>
<p>&nbsp;&nbsp;delay(1000);</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;//&nbsp;remove&nbsp;value</p>
<p>&nbsp;//Firebase.remove("number");</p>
<p>&nbsp;&nbsp;//delay(1000);</p>
<p>&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<p>//=======================================================automatic&nbsp;tresholt&nbsp;set</p>
<p>int&nbsp;treshold=0;</p>
<p>treshold&nbsp;=&nbsp;Firebase.getInt("set_treshold");</p>
<p>Serial.print("treshold:&nbsp;");&nbsp;Serial.print(treshold);</p>
<p>&nbsp;</p>
<p>if&nbsp;(suhu&nbsp;&gt;=&nbsp;treshold)</p>
<p>&nbsp;&nbsp;{</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Serial.println("&nbsp;&nbsp;=&nbsp;Mati");</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;digitalWrite&nbsp;(led,&nbsp;HIGH);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;digitalWrite&nbsp;(LED_BUILTIN,&nbsp;HIGH);</p>
<p>&nbsp;&nbsp;}</p>
<p>else</p>
<p>&nbsp;&nbsp;{</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Serial.println("&nbsp;=&nbsp;Nyala");</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;digitalWrite&nbsp;(led,&nbsp;LOW);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;digitalWrite&nbsp;(LED_BUILTIN,&nbsp;LOW);</p>
<p>&nbsp;&nbsp;}</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>//=======================================================cek-in</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;//&nbsp;append&nbsp;a&nbsp;new&nbsp;value&nbsp;to&nbsp;/logs</p>
<p>&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;String&nbsp;test&nbsp;=&nbsp;"{\"suhu:\""+String(suhu)+",\"treshold:\""+String(treshold)+"}";</p>
<p>&nbsp;&nbsp;String&nbsp;name&nbsp;=&nbsp;Firebase.pushString("logs",&nbsp;test);</p>
<p>&nbsp;&nbsp;//&nbsp;handle&nbsp;error</p>
<p>&nbsp;&nbsp;if&nbsp;(Firebase.failed())&nbsp;{</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.print("pushing&nbsp;/logs&nbsp;failed:");</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Serial.println(Firebase.error());&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</p>
<p>&nbsp;&nbsp;}</p>
<p>&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;Serial.print("pushed:&nbsp;/record/s");</p>
<p>&nbsp;&nbsp;Serial.println(name);</p>
<p>&nbsp;&nbsp;Serial.println("============================================================");</p>
<p>&nbsp;&nbsp;delay(1000);</p>
<p>}</p>
</html>
